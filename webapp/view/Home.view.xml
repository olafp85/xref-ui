<mvc:View xmlns:calendar="sap.ui.unified.calendar"
    controllerName="xref.controller.Home"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:layout="sap.ui.layout"
    xmlns="sap.m">
    <Page title="{i18n>title}"
        class="sapUiContentPadding sapUiResponsivePadding--header">
        <headerContent>
            <Text text="{view>/version}"></Text>
            <Button text="{i18n>login}"
                press="onLogin"
                visible="{view>/action/login}"></Button>
            <Button text="{i18n>logout}"
                press="onLogout"
                visible="{view>/action/logout}"></Button>
        </headerContent>
        <content>
            <Table id="table"
                width="auto"
                class="sapUiResponsiveMargin"
                autoPopinMode="true"
                items="{
		        	path: 'xrefs>/',
		        	sorter: { path: 'name' }
	        	}"
                fixedLayout="false"
                sticky="ColumnHeaders"
                hiddenInPopin="Low"
                mode="{view>/table/mode}"
                delete="onItemDelete"
                updateFinished="onUpdateFinished">
                <headerToolbar>
                    <OverflowToolbar>
                        <Title text="{i18n>tableHeader} ({view>/table/count})" />
                        <ToolbarSpacer/>
                        <SearchField liveChange="onSearch">
                            <layoutData>
                                <OverflowToolbarLayoutData maxWidth="15rem"
                                    shrinkable="true"
                                    priority="NeverOverflow"/>
                            </layoutData>
                        </SearchField>
                        <OverflowToolbarButton text="{i18n>sort}"
                            icon="sap-icon://sort"
                            press="onSort">
                            <layoutData>
                                <OverflowToolbarLayoutData group="1" />
                            </layoutData>
                        </OverflowToolbarButton>
                        <OverflowToolbarButton text="{i18n>upload}"
                            icon="sap-icon://upload"
                            press="onUpload"
                            visible="{view>/action/upload}">
                            <layoutData>
                                <OverflowToolbarLayoutData group="1" />
                            </layoutData>
                        </OverflowToolbarButton>
                        <OverflowToolbarButton text="{i18n>display}"
                            icon="sap-icon://display"
                            press="onDisplay"
                            visible="{view>/action/display}">
                            <layoutData>
                                <OverflowToolbarLayoutData group="1" />
                            </layoutData>
                        </OverflowToolbarButton>
                        <OverflowToolbarButton text="{i18n>edit}"
                            icon="sap-icon://edit"
                            press="onEdit"
                            visible="{view>/action/edit}">
                            <layoutData>
                                <OverflowToolbarLayoutData group="1" />
                            </layoutData>
                        </OverflowToolbarButton>
                    </OverflowToolbar>
                </headerToolbar>
                <columns>
                    <Column>
                        <Text text="{i18n>type}" />
                    </Column>
                    <Column>
                        <Text text="{i18n>name}" />
                    </Column>
                    <Column importance="Low">
                        <Text text="{i18n>system}" />
                    </Column >
                    <Column importance="Low"
                        hAlign="Right">
                        <Text text="{i18n>date}" />
                    </Column>
                </columns>
                <items>
                    <ColumnListItem type="{view>/columnListItem/type}"
                        press="onItemPress">
                        <cells>
                            <Text text="{= ${xrefs>type}.toLowerCase()}" />
                            <Text text="{xrefs>name}" />
                            <Text text="{xrefs>system}" />
                            <Text text="{
                                path: 'xrefs>date',
                                type: 'sap.ui.model.type.Date',
                                formatOptions: {
                                    source: { pattern: 'yyyy-MM-dd' },
                                    relative: 'true', 
                                    relativeRange: [-2, 2],
                                    style: 'long'
                                }
                            }" />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
    </Page>
</mvc:View>
