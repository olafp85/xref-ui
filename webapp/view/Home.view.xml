<mvc:View xmlns:calendar="sap.ui.unified.calendar"
    controllerName="xref.controller.Home"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:layout="sap.ui.layout"
    xmlns="sap.m">
    <Page showHeader="false">
        <content>
            <Table id="table"
                width="auto"
                class="sapUiResponsiveMargin"
                autoPopinMode="true"
                items="{
		        	path: 'xrefs>/',
		        	sorter: { path: 'name' }
	        	}"
                fixedLayout="false"
                sticky="ColumnHeaders"
                hiddenInPopin="Low"
                mode="{view>/table/mode}"
                delete="onItemDelete"
                updateFinished="onUpdateFinished">
                <headerToolbar>
                    <OverflowToolbar>
                        <Title text="{i18n>title} ({= ${view>/table/count}.toLocaleString()})" />
                        <ToolbarSpacer/>
                        <SearchField liveChange="onSearch">
                            <layoutData>
                                <OverflowToolbarLayoutData maxWidth="15rem"
                                    shrinkable="true"
                                    priority="NeverOverflow"/>
                            </layoutData>
                        </SearchField>
                        <OverflowToolbarButton text="Sort"
                            tooltip="Sort"
                            icon="sap-icon://sort"
                            type="Transparent"
                            press="onSort">
                            <layoutData>
                                <OverflowToolbarLayoutData group="1" />
                            </layoutData>
                        </OverflowToolbarButton>
                        <OverflowToolbarButton text="Upload"
                            tooltip="Upload"
                            icon="sap-icon://upload"
                            type="Transparent"
                            visible="{view>/editMode}"
                            press="onUpload">
                            <layoutData>
                                <OverflowToolbarLayoutData group="1" />
                            </layoutData>
                        </OverflowToolbarButton>
                        <OverflowToolbarButton text="Display"
                            tooltip="Display"
                            icon="sap-icon://display"
                            type="Transparent"
                            visible="{view>/editMode}"
                            press="onDisplay">
                            <layoutData>
                                <OverflowToolbarLayoutData group="1" />
                            </layoutData>
                        </OverflowToolbarButton>
                        <OverflowToolbarButton text="Edit"
                            tooltip="Edit"
                            icon="sap-icon://edit"
                            type="Transparent"
                            visible="{= !${view>/editMode}}"
                            press="onEdit">
                            <layoutData>
                                <OverflowToolbarLayoutData group="1" />
                            </layoutData>
                        </OverflowToolbarButton>
                    </OverflowToolbar>
                </headerToolbar>
                <columns>
                    <Column>
                        <Text text="{i18n>type}" />
                    </Column>
                    <Column>
                        <Text text="{i18n>name}" />
                    </Column>
                    <Column importance="Low">
                        <Text text="{i18n>system}" />
                    </Column >
                    <Column importance="Low"
                        hAlign="Right">
                        <Text text="{i18n>date}" />
                    </Column>
                </columns>
                <items>
                    <ColumnListItem type="{view>/columnListItem/type}"
                        press="onItemPress">
                        <cells>
                            <Text text="{= ${xrefs>type}.toLowerCase()}" />
                            <Text text="{xrefs>name}" />
                            <Text text="{xrefs>system}" />
                            <Text text="{
                                path: 'xrefs>date',
                                type: 'sap.ui.model.type.Date',
                                formatOptions: {
                                    source: { pattern: 'yyyy-MM-dd' },
                                    relative: 'true', 
                                    relativeRange: [-2, 2],
                                    style: 'long'
                                }
                            }" />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
    </Page>
</mvc:View>
